# REVOL-E-TION ![System diagram](./images/revol-e-tion_icon.svg)

### Resilient Electric Vehicle Optimization model for Local Energy TransitION

REVOL-E-TION is an energy system model toolset designed to optimize integration of electric vehicle fleets into 
local energy systems such as mini- and microgrids, company sites, apartment blocks or single homes and estimate
the resulting technoeconomic potentials in terms of costs and revenues within the energy (and optionally also the
mobility system). It is built as a wrapper on top of the [oemof](https://oemof.org) energy system model framework. 

#### Created by 
Philipp Rosner, M.Sc. and Brian Dietermann, M.Sc.  
Institute of Automotive Technology  
Department of Mobility Systems Engineering  
TUM School of Engineering and Design  
Technical University of Munich  
philipp.rosner@tum.de  
September 2nd, 2021

#### Contributors
Marcel Brödel, M.Sc. - Research Associate 01/2024-

David Eickholt, B.Sc. - Semester Thesis submitted 07/2021  
Marcel Brödel, B.Sc. - Semester Thesis submitted 05/2022  
Hannes Henglein, B.Sc. - Semester Thesis submitted 10/2022  
Marc Alsina Planelles, B.Sc. - Master's Thesis submitted 10/2022  
Juan Forero Yacaman - Bachelor's Thesis submitted 04/2023  
Elisabeth Spiegl - Bachelor's Thesis submitted 06/2023  
Hannes Henglein, B.Sc. - Master's Thesis ongoing  
Alejandro Hernando Armengol, B.Sc. - Master's Thesis submitted 10/2023

## Licensing
REVOL-E-TION is licensed under the <mark> License still to be chosen </mark>.  
The full license text can be found in the LICENSE file in the root directory of the repository.

<mark> Prior to open source publication of the toolset, any distribution outside FTM researchers or their immediately affiliated students is prohibited. </mark>

## Related publications
- P. Rosner and M. Lienkamp, "Unlocking the Joint Potential of Electric Mobility and Rural Electrification - A Concept for Improved Integration using Modular Batteries," 2022 IEEE PES/IAS PowerAfrica, Kigali, Rwanda, 2022, pp. 1-5, https://doi.org/10.1109/PowerAfrica53997.2022.9905305.
- P. Rosner, B. Dietermann, M. Brödel and M. Lienkamp, "REVOL-E-TION: A Flexible and Scalable Model to Optimally Integrate Bidirectional EV Fleets in Local Energy Systems", Poster, 2024 Vehicle2Grid Conference, Münster, Germany, 2024, https://doi.org/10.13140/RG.2.2.19632.16648

## Description  
REVOL-E-TION is a scalable generator for (mixed integer) linear energy system models of local energy systems with or without electric vehicle fleets.
It can be used to optimize component sizes and/or dispatch behavior of the system to achieve least cost in the simulation timeframe.
Simulation results are later extrapolated and discounted to a project timeframe to estimate the technoeconomic potential of the system in the long run.
Please note that this split between simulation and extrapolation improves computational effort, but creates possibly unwanted incentives for the optimizer (e.g. preferring low initial cost but operationally expensive power sources), especially when sizing components.

REVOL-E-TION groups oemof components and buses into blocks representing real-world systems (e.g. a PV array) for easy application.
Electric vehicles (in fact any mobile storage devices) are modeled individually within a block called a CommoditySystem.
Their behavior (i.e. when they depart and arrive again, how much energy they use in between and whether they can be charged externally) is described in a so called log file.
Log files can be created using the integrated Discrete Event Simulation (DES), which is also capable of modeling range extension through a Battery CommoditySystem as well as multiple use cases in different time frames (e.g. summer/winter) for the commoditites.

The following system diagram shows the basic structure including one example of each block class (blocks are indicated by dashed lines):
![System diagram](./images/system_diagram.png)

## Installation
REVOL-E-TION is designed to run under Windows 10, Ubuntu 22.04 LTS and MacOS 14 Sonoma, each with Python 3.11.
While portability is generally built in, other operating systems are untested.

#### Step 1: Getting the source code
REVOL-E-TION is available at the institute's [GitHub](https://github.com/TUMFTM/REVOL-E-TION) and can be cloned from there.

#### Step 2: Environment & Packages
REVOL-E-TION is developed and tested with Python 3.11, which is recommended to use with a clean virtual or conda environment to start with.
All required packages are listed in ```requirements.txt``` and can be installed through ```pip install -r requirements.txt```, given the correct environment is active.

#### Step 3: MILP Solver
REVOL-E-TION requires a [pyomo compatible](https://pyomo.readthedocs.io/en/stable/solving_pyomo_models.html#supported-solvers) Mixed Integer Linear Programming (MILP) solver (as does oemof).
The open-source [cbc](https://github.com/coin-or/Cbc/releases/latest) solver works well.
The proprietary [Gurobi](https://www.gurobi.com/downloads/) solver is recommended however, as it is faster in execution, especially for large problems and offers a free academic license.

#### Step 4: Basic Usage
Running REVOL-E-TION requires closely defined scenario(s) to simulate and common simulation settings to operate on as well as a target directory for the results.
The former two are to be given as two .csv-files within the ```./input/scenarios``` and ```./input/settings``` directories respectively when starting a simulation.
To select the files, a Graphical User Interface (GUI) comes up automatically when executing ```main.py``` without any parameters given.
Alternatively, the names of the files can be specified in the terminal execution command as follows, given the base directory is selected:
```
python main.py <scenario_file_name>.csv <settings_file_name>.csv <relative_path_to_result_parent_directory>
```
In case no settings file is given, the ```default.csv``` file distributed through git is used.
In case no result directory is given, the ```./results``` directory is used.
Example scenario and settings files are provided in the respective directories.
The results will be saved in the specified directory in a subfolder named after the scenario file with a run-time.
Formatting of the scenario and settings files can be taken from the example files and is explained in tabular form below.
Some parameters in the scenario files reference to other files specified by file name within ```./input/<name of block class>```.
This mostly applies to timeseries data.
Furthermore, to describe the mapping of different timeframes defining behavior of CommoditySystems (see below), modification of the ```mapper_timeframe.py``` code file might be necessary to fit the scenario as this is not simply and flexibly done in parameter files.

Concerning computational effort, REVOL-E-TION relies heavily on single core computing power for each scenario and especially in 'go' strategy uses significant memory. To avoid memory limitations, it is advised to limit the number of parallel scenarios to be executed in the settings file depending on the hardware used.

## General Terms & Definitions
The following table details common terms occuring in further descriptions and the code:

| Term                   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Run                    | A single execution of REVOL-E-TION defined by a single scenario file (possibly containing multiple scenario definitions as columns) and settings file each. Common information and methods valid for all scenarios are defined in a SimulationRun object.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Scenario               | A set of parameters (i.e. an energy system) to be simulated and/or optimized. It is defined by a column in the scenario file and some timeseries inputs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Strategy               | The (energy management) strategy to dispatch the energy system's blocks generally (see CommoditySystem integration levels later on for differences). REVOL-E-TION supports two strategies: "go" for single shot global optimization and "rh" for rolling horizon (i.e. time slotted myopic) optimization similar to Model Predictive Control (MPC). The former is a special case of the latter with just a single horizon. Component size optimization is only applicable in "go".                                                                                                                                                                                                                                                                                                                                                                                               |
| Horizon                | A single optimization process by the solver, whether as the only one of the scenario ("go" strategy) or as a slice of the simulation timeframe ("rh" strategy). In the latter case, the total simulation time is split up into prediction horizons (each of which is represented in the code by a PredictionHorizon object) that are simulated consecutively. However, overlap between the horizons is necessary to ensure feasibilty of dispatch. Therefore, only the first part of the prediction horizon (called control horizon) is actually used for overall result calculation, while the rest is discarded. The simulation timeframe is automatically split up into horizons as per the defined length of prediction and control horizons from the scenario file. See the following diagram for clarification: ![Rolling Horizon principle](./images/rolling_horizon.png) |
| Block                  | A set of oemof components representing a real-world system including necessary converters and buses. Each is represented by an instance of the Block parent class with further child classes. The blocks present in the energy system are defined in the scenario file as a dictionary, except for the core block (of class SystemCore) containing the AC and DC buses as well as the converter(s) inbetween them. Multiple instances of one block can coexist in a model. The possible types (i.e. Classes) are laid out in the following chapter.                                                                                                                                                                                                                                                                                                                              |
| Component              | A component is an oemof element that is either a source, a sink, a bus, a converter or a storage.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

## Classes of Blocks
The following table details the classes of blocks that can be specified in the "blocks" parameter of the scenario in the scenario file with respective names for the instances. Block instances cannot be named "scenario". Each instance requires a certain set of parameters dependent on its class. These are specified in the following chapter.

| Class Name              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|-------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| InvestBlock             | Parent class for all blocks that are possibly being sized in optimization (i.e. where an investment decision has to be taken) and for which entering ```'opt'``` as the size in the scenario file will trigger that size optimization. However, this option is only compatible with the "go" strategy. Class contains mostly methods for result evaluation.                                                                                                                                                                    |
| RenewableInvestBlock    | Parent class for all InvestBlocks representing a renewable source with a curtailment sink component and variable potential power (defined as a fraction of nominal power to enable sizing) over time. Child of class InvestBlock.                                                                                                                                                                                                                                                                                              |
| SystemCore              | Class for collection of central energy system components (AC and DC buses and the two unidirectional transformers between them). Child of class Block. This is present once and only once in every energy system defined in REVOL-E-TION under the name "core". For pure AC or DC systems, the respective core cost and size parameters can be set to zero to have no effect on the result.                                                                                                                                    |
| FixedDemand             | Class for undeferrable (i.e. inflexible) power demand such as households. Child of class Block. Power timeseries is defined in a csv file.                                                                                                                                                                                                                                                                                                                                                                                     |
| PVSource                | Class for photovoltaic array. Child of class RenewableInvestBlock. Power potential is defined either in a [Solcast](https://solcast.com/) or [PVGIS](https://re.jrc.ec.europa.eu/pvg_tools/en/) formatted csv file (both pre-downloaded) or the [PVGIS API](https://joint-research-centre.ec.europa.eu/photovoltaic-geographical-information-system-pvgis/getting-started-pvgis/api-non-interactive-service_en) (requires active internet connection).                                                                         |
| WindSource              | Class for wind turbine. Child of class RenewableInvestBlock. Power potential is defined either in a csv timeseries file or from PVSource data containing wind speed, which is then converted to power for a specific turbine height. For the latter option, a PVSource block must exist.                                                                                                                                                                                                                                       |
| ControllableSource      | Class for independently controllable power sources (e.g. fossil generator, hydro power plant) that is unlimited in energy. Child of class InvestBlock.                                                                                                                                                                                                                                                                                                                                                                         |
| GridConnection          | Class for utility grid and/or energy market connection. Child of class InvestBlock. A GridConnection instance can contain multiple GridMarkets. Definition of GridMarket instances happens in a separate csv file.                                                                                                                                                                                                                                                                                                             |
| StationaryEnergyStorage | Class for stationary battery energy storage systems. Child of class InvestBlock. A posteriori aging (i.e. capacity reduction) estimation is possible and will be taken into the next horizon as a reduced available SOC range. Storage modelling is done linearly without SOC or temperature based limits of charge or discharge power.                                                                                                                                                                                        |
| CommoditySystem         | Parent class for fleets of mobile battery based devices (e.g. electric vehicles or battery rental). Child of class InvestBlock. Behavior is defined in a csv file (the log) that can either be given or generated within the integrated Discrete Event Simulation from stochastic behavioral parameters to be given in a usecase definition csv file for different timeframes defined in ```mapper_timeframe.py``` in code. Each CommoditySystem consists of at least one MobileCommodity representing one vehicle or battery. |
| VehicleCommoditySystem  | Class for fleet of electric vehicles, possibly with range extension using a BatteryCommoditySystem (see [publication](https://ieeexplore.ieee.org/document/9905305)). Child of class CommoditySystem.                                                                                                                                                                                                                                                                                                                          |
| BatteryCommoditySystem  | Class for fleet of mobile batteries. Child of class CommoditySystem.                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

## Scenario Input Parameters
The scenario file defines all noncomplex (i.e. integer, float, string, boolean) parameters of the scenarios.
Complex (multidimensional) parameters are mostly defined through links to other files (by filename) in the scenario file.
The following table specifies each parameter for each possible block class in the scenario file.
If and only if a block of a certain class exists within the scenario are these parameters required and read in. 
Therefore not every scenario file contains all possible parameters.
The first column of the scenario file defines the name of the block the parameter in the second column applies to.
An example scenario file is provided in the ```./input/scenarios``` directory.

| Block                     | Key                 | Name                                                         | Type             | Description                                                                                                                                                                                                                                                                            | Valid values or format                                            |
|---------------------------|---------------------|--------------------------------------------------------------|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
| Scenario                  | starttime           | Start time                                                   | str              | Start time of the project and the simulation. The project always starts at 00:00 local time                                                                                                                                                                                            | 'dd.mm.YYYY'                                                      |
|                           | timestep            | Time step                                                    | str              | Time step used for the simulation                                                                                                                                                                                                                                                      | formats compatible with pd.to_timedelta() such as '15min' or '1H' |
|                           | sim_duration        | Simulation duration                                          | int              | Simulation duration in days                                                                                                                                                                                                                                                            | [1, inf[                                                          |
|                           | prj_duration        | Project duration                                             | int              | Project duration in years to which the economic results of the simulation duration are extrapolated                                                                                                                                                                                    | [1, inf[                                                          |
|                           | strategy            | Strategy                                                     | str              | Optimization strategy                                                                                                                                                                                                                                                                  | 'go' or 'rh' (global optimum, rolling horizon)                    |
|                           | len_ph              | Prediction horizon length                                    | int              | Length of the prediction horizon in hours. Neglected for every optimization strategy other than 'rh'                                                                                                                                                                                   | [1, inf[                                                          |
|                           | len_ch              | Control horizon length                                       | int              | Length of the control horizon in hours. Neglected for every optimization strategy other than 'rh'                                                                                                                                                                                      | [1, inf[                                                          |
|                           | wacc                | Weighted average cost of capital                             | float            | Weighted average cost of capital: discount rate for future expenses/revenues and energies per year                                                                                                                                                                                     | [0, 1]                                                            |
|                           | currency            | Currency                                                     | str              | Currency used to display results of economic calculations. No influence of calculation itself, only used for displaying.                                                                                                                                                               | e.g. 'EUR', 'USD'                                                 |
|                           | latitude            | Latitude                                                     | float            | Latitude of the location of the local energy system. Used to determine timezone, pv and wind data. Has to be given in WGS84                                                                                                                                                            | [-90, 90]                                                         |
|                           | longitude           | Longitude                                                    | float            | Latitude of the location of the local energy system. Used to determine timezone, pv and wind data. Has to be given in WGS84                                                                                                                                                            | [-90, 90]                                                         |
|                           | cost_eps            | Epsilon costs                                                | float            | Cost added to some flows in order to disincentivice circular flows                                                                                                                                                                                                                     | [0, inf[                                                          |
|                           | blocks              | Blocks                                                       | dict             | All blocks present in the scenario in the format {block_name: class_name}                                                                                                                                                                                                              | '{'custom block name': 'class name of block'}'                    |
| SystemCore                | size_dcac           | DC/AC size                                                   | str or float     | Maximum power of the DC/AC converter in the SystemCore in W. Can be set to a specific value or set as an objective to the optimization. Setting one of the sizes to 'equal' ensures the same value for both sizes even for optimized values                                            | 'opt', 'equal' or [0, inf[                                        |
|                           | size_acdc           | AC/DC size                                                   | str or float     | Maximum power of the AC/DC converter in the SystemCore in W. Can be set to a specific value or set as an objective to the optimization. Setting one of the sizes to 'equal' ensures the same value for both sizes even for optimized values                                            | 'opt', 'equal' or [0, inf[                                        |
|                           | capex_spec          | Specific capital expenditures                                | float            | Specific capital expenditures for each of the converters in the SystemCore: cost in currency per installed power in W                                                                                                                                                                  | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | Specific maintenance expenditures for each of the converters in the SystemCore: cost in currency per year per installed power in W                                                                                                                                                     | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | Specific operational expenditures for each of the converters in the SystemCore cost in currency per converted energy in Wh. Energy is measured at converter inflow                                                                                                                     | string with filename or [0, inf[                                  |
|                           | ls                  | Lifespan                                                     | <mark>int</mark> | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, inf[                                                          |
|                           | eff_dcac            | DC/AC efficiency                                             | float            | Efficiency of the DC/AC converter in the SystemCore                                                                                                                                                                                                                                    | [0, 1]                                                            |
|                           | eff_acdc            | AC/DC efficiency                                             | float            | Efficiency of the AC/DC converter in the SystemCore                                                                                                                                                                                                                                    | [0, 1]                                                            |
| FixedDemand               | filename            | Filename                                                     | str              | Filename of a csv file containing a timeseries specifying the fixed demand of the block. The file has to include the two columns 'time' and 'power' including a timezone aware timestamp and the corresponding power value in W                                                        | string with filename                                              |
|                           | crev_spec           | Specific customer revenue                                    | float            | Specific customer revenue for consumed energy in currency per Wh                                                                                                                                                                                                                       | [0, inf[                                                          |
| WindSource                | size                | Size                                                         | float            | Rated power of wind turbine in W. Can be set to a specific value or set as an objective to the optimization                                                                                                                                                                            | 'opt' or [0, inf[                                                 |
|                           | data_source         | Data source                                                  | str              | Data source for wind power. Wind power can either be calculated from the PV data or given as a separate file                                                                                                                                                                           | string containing the name of a block of class PVSource or 'file' |
|                           | height              | Height                                                       | float            | Height of the wind turbine <mark>-> define measuring position for height </mark>                                                                                                                                                                                                       | [0, inf[                                                          |
|                           | filename            | Filename                                                     | str              | Filename of csv file containing wind power data with the columns time (timezone aware timestamp) and power_spec (specific power in W per rated power in W) for each defined timestamp                                                                                                  | string with filename                                              |
|                           | capex_spec          | Specific capital expenditures                                | float            | Specific capital expenditures: cost in currency per installed rated power in W                                                                                                                                                                                                         | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | Specific maintenance expenditures: cost in currency per year per installed rated power in W                                                                                                                                                                                            | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | Specific operational expenditures: cost in currency per generated energy in Wh. Can be given as float or filename of a csv file containing a timeseries                                                                                                                                | string with filename or [0, inf[                                  |
|                           | ls                  | Lifespan                                                     | <mark>int</mark> | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, inf[                                                          |
|                           | eff                 | Efficiency                                                   | efficiency       | Efficiency of the wind turbine                                                                                                                                                                                                                                                         | [0, 1]                                                            |
| PVSource                  | size                | Size                                                         | float            | Peak power of the pv array in in Wp. Can be set to a specific value or set as an objective to the optimization                                                                                                                                                                         | 'opt' or [0, inf[                                                 |
|                           | data_source         | Data source                                                  | str              | Data source for pv power. This can be PVGIS API or a file containing data from PVGIS or Solcast                                                                                                                                                                                        | <mark>'pvgis api', 'pvgis file', 'solcast file'</mark>            |
|                           | filename            | Filename                                                     | str              | Name of a PVGIS or Solcast csv file                                                                                                                                                                                                                                                    | string with filename                                              |
|                           | capex_spec          | Specific capital expenditures                                | float            | Specific capital expenditures: cost in currency per installed peak power in W                                                                                                                                                                                                          | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | Specific maintenance expenditures: cost in currency per year per installed peak power in W                                                                                                                                                                                             | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | Specific operational expenditures: cost in currency per generated energy in Wh. Can be given as float or filename of a csv file containing a timeseries                                                                                                                                | string with filename or [0, inf[                                  |
|                           | ls                  | Lifespan                                                     | int              | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, inf[                                                          |
|                           | eff                 | Efficiency                                                   | float            | Efficiency of the <mark>PV array's DC/DC converter</mark>                                                                                                                                                                                                                              | [0, 1]                                                            |
| ControllableSource        | size                | Size                                                         | str or float     | Rated power of the source in W. Can be set to a specific value or set as an objective to the optimization                                                                                                                                                                              | 'opt' or [0, inf[                                                 |
|                           | capex_spec          | Specific capital expenditures                                | float            | Specific capital expenditures: cost in currency per installed power in W                                                                                                                                                                                                               | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | Specific maintenance expenditures: cost in currency per year per installed peak power in W                                                                                                                                                                                             | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | Specific operational expenditures: cost in currency per generated energy in Wh. Can be given as float or filename of a csv file containing a timeseries                                                                                                                                | string with filename or [0, inf[                                  |
|                           | ls                  | Lifespan                                                     | int              | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, inf[                                                          |
|                           | eff                 | Efficiency                                                   | float            | Efficiency of the source                                                                                                                                                                                                                                                               | [0, 1]                                                            |
| GridConnection            | size_g2mg           | Size grid to mini grid                                       | str or float     | Maximum power of the grid connection point towards the local grid in W. Can be set to a specific value or set as an objective to the optimization. Setting one of the sizes to 'equal' ensures the same value for both sizes even for optimized values                                 | 'opt', 'equal', [0, inf[                                          |
|                           | size_mg2g           | Size mini grid to grid                                       | str or float     | Maximum power of the grid connection point towards the public grid in W. Can be set to a specific value or set as an objective to the optimization. Setting one of the sizes to 'equal' ensures the same value for both sizes even for optimized values                                | 'opt', 'equal', [0, inf[                                          |
|                           | peakshaving         | Peakshaving                                                  | str              | Peakshaving period. Peakshaving can be deactivated by setting this parameter to 'None'                                                                                                                                                                                                 | 'None', 'day', 'week', 'month', 'quarter', 'year'                 |
|                           | opex_peakshaving    | Operational expenditures for peakshaving                     | float            | Specific operational expenditures for maximum power drawn from the public grid in cost in currency per peak power in W per peakshaving duration                                                                                                                                        | [0, inf[                                                          |
|                           | capex_spec          | Specific capital expenditures                                | float            | Specific capital expenditures: cost in currency per installed power in W of the grid connection                                                                                                                                                                                        | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | Specific maintenance expenditures: cost in currency per year per installed peak power in W of the grid connection                                                                                                                                                                      | [0, inf[                                                          |
|                           | ls                  | Lifespan                                                     | int              | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, inf[                                                          |
|                           | eff                 | Efficiency                                                   | float            | Efficiency of the grid connection                                                                                                                                                                                                                                                      | [0, 1]                                                            |
|                           | markets_file        | Markets file                                                 | str              | If multiple markets should be specified the filename of a file containing the parameters for different markets can be set here. Otherwise set to 'None'. If a markets file is specified, the default market specified by the following three parameters in this file will be neglected | string with filename or 'None'                                    |
|                           | res_only            | Renewable sources only                                       | bool             | Default market: If activated only energy produced by blocks of class PVSources or WindSource during the current timestep will be fed to the default market                                                                                                                             | 'True' or 'False'                                                 |
|                           | opex_spec_g2mg      | Specific operational expenditures for grid to mini grid      | str or float     | Default market: Specific operational expenditures for buying energy from the default market: cost in currency per energy in Wh. Can be given as float or filename of a csv file containing a timeseries                                                                                | string with filename or [0, inf[                                  |
|                           | opex_spec_mg2g      | Specific operational expenditures for mini grid to grid      | str or float     | Default market: Specific operational expenditures for selling energy to the default market; cost in currency per energy in Wh. Can be given as float or filename of a csv file containing a timeseries                                                                                 | string with filename or [0, inf[                                  |
| StationaryEnergyStorage   | size                | Size                                                         | str or float     | Nominal capacity of the storage in Wh. Can be set to a specific value or set as an objective to the optimization                                                                                                                                                                       | 'opt' or [0, inf[                                                 |
|                           | pv_only             | PV only                                                      | bool             | description                                                                                                                                                                                                                                                                            | 'True' or 'False'                                                 |
|                           | aging               | Aging                                                        | bool             | description                                                                                                                                                                                                                                                                            | 'True' or 'False'                                                 |
|                           | chemistry           | Chemistry                                                    | str              | description                                                                                                                                                                                                                                                                            | 'NMC', 'LFP'                                                      |
|                           | temp_battery        | Battery temperature                                          | <mark>??</mark>  | description                                                                                                                                                                                                                                                                            | <mark>??</mark>                                                   |
|                           | capex_spec          | Specific capital expenditures                                | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | description                                                                                                                                                                                                                                                                            | string with filename [0, inf[                                     |
|                           | ls                  | Lifespan                                                     | float            | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | eff_roundtrip       | Roundtrip efficiency                                         | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | crate_chg           | Charge C-rate                                                | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | crate_dis           | Discharge C-rate                                             | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | soc_init            | Initial SOC                                                  | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soh_init            | Initial SOH                                                  | float            | description                                                                                                                                                                                                                                                                            | <mark>[0, 1]</mark>                                               |
|                           | sdr                 | Self discharge rate                                          | float            | Self discharge rate of storage components per month (30 days)                                                                                                                                                                                                                          | [0, inf[                                                          |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, inf[                                                          |
|                           | eff                 | Efficiency                                                   | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
| VehicleCommoditySystem    | data_source         | Data source                                                  | str              | description                                                                                                                                                                                                                                                                            | <mark>??</mark>                                                   |
|                           | filename            | Filename                                                     | str              | description                                                                                                                                                                                                                                                                            | string with filename                                              |
|                           | num                 | Number                                                       | int              | number of vehicles within the commodity system                                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | size                | Size                                                         | str or float     | description                                                                                                                                                                                                                                                                            | 'opt', [0, inf[                                                   |
|                           | int_lvl             | Integration level                                            | str              | description                                                                                                                                                                                                                                                                            | 'uc', 'fcfs', 'soc', 'equal', 'cc', 'v2v', 'v2mg'                 |
|                           | forecast_hours      | Forecast hours                                               | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | power_lim_static    | Static power limit                                           | float            | description                                                                                                                                                                                                                                                                            | 'None', [0, inf[                                                  |
|                           | system              | System                                                       | str              | description                                                                                                                                                                                                                                                                            | 'AC', 'DC'                                                        |
|                           | rex_cs              | Range extender commodity system                              | str              | description                                                                                                                                                                                                                                                                            | string with name of BatteryCommoditySystem                        |
|                           | aging               | Aging                                                        | bool             | description                                                                                                                                                                                                                                                                            | 'True', 'False'                                                   |
|                           | chemistry           | Chemistry                                                    | str              | description                                                                                                                                                                                                                                                                            | 'NMC', 'LFP'                                                      |
|                           | temp_battery        | Battery temperature                                          | str or float     | description                                                                                                                                                                                                                                                                            | <mark>??</mark>                                                   |
|                           | ls                  | Lifespan                                                     | float            | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | soh_init            | Inital SOH                                                   | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_init            | Inital SOC                                                   | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_target_high     | Higher target SOC                                            | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_target_low      | Lower target SOC                                             | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_return          | Return SOC                                                   | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | consumption         | Consumption                                                  | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | speed_avg           | Average speed                                                | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | capex_spec          | Specific capital expenditures                                | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_sys_chg   | Specific operational expenditures for system charging        | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_sys_dis   | Specific operational expenditures for system discharging     | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_ext_ac    | Specific operational expenditures for external AC charging   | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_ext_dc    | Specific operational expenditures for external DC charging   | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | crev_spec_time      | Specific customer revenues per time                          | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | crev_spec_dist      | Specific customer revenues per distance                      | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_chg             | Maximum charging power                                       | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_dis             | Maximum discharging power                                    | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_ext_ac          | Maximum power for external AC charging                       | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_ext_dc          | Maximum power for external DC charging                       | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | factor_pwr_des      | Dactor for maximum charging power in DES                     | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | eff_conv            | Converter efficiency                                         | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | eff_roundtrip       | Storage roundtrip efficiency                                 | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, 1]                                                            |
|                           | sdr                 | Self discharge rate                                          | float            | Self discharge rate of storage components per month (30 days)                                                                                                                                                                                                                          | [0, inf[                                                          |
| BatteryCommoditySystem    | data_source         | Data source                                                  | str              | description                                                                                                                                                                                                                                                                            | <mark>??</mark>                                                   |
|                           | filename            | Filename                                                     | str              | description                                                                                                                                                                                                                                                                            | string with filename                                              |
|                           | num                 | Number                                                       | int              | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | int_lvl             | Integration level                                            | str              | description                                                                                                                                                                                                                                                                            | 'uc', 'fcfs', 'soc', 'equal', 'cc', 'v2v', 'v2mg'                 |
|                           | forecast_hours      | Forecast hours                                               | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | power_lim_static    | Static power limit                                           | float            | description                                                                                                                                                                                                                                                                            | 'None', [, inf[                                                   |
|                           | system              | System                                                       | str              | description                                                                                                                                                                                                                                                                            | 'AC', 'DC'                                                        |
|                           | size                | Size                                                         | str or float     | description                                                                                                                                                                                                                                                                            | 'opt', [0, inf[                                                   |
|                           | aging               | Aging                                                        | bool             | description                                                                                                                                                                                                                                                                            | 'True', 'False'                                                   |
|                           | chemistry           | Chemistry                                                    | str              | description                                                                                                                                                                                                                                                                            | 'NMC', 'LFP'                                                      |
|                           | temp_battery        | Battery temperature                                          | str or float     | description                                                                                                                                                                                                                                                                            | <mark>??</mark>                                                   |
|                           | ls                  | Lifespan                                                     | float            | Lifespan of the block in years after which it will be replaced                                                                                                                                                                                                                         | [1, inf[                                                          |
|                           | soh_init            | Initial SOH                                                  | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_init            | Initial SOC                                                  | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_target_high     | Higher target SOC                                            | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_target_low      | Lower target SOC                                             | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | soc_return          | Return SOC                                                   | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | capex_spec          | Specific capital expenditures                                | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | mntex_spec          | Specific maintenance expenditures                            | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | opex_spec           | Specific operational expenditures                            | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_sys_chg   | Specific operational expenditures for system charging        | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_sys_dis   | Specific operational expenditures for system discharging     | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_ext_ac    | Specific operational expenditures for external AC charging   | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | opex_spec_ext_dc    | Specific operational expenditures for external DC charging   | str or float     | description                                                                                                                                                                                                                                                                            | string with filename or [0, inf[                                  |
|                           | crev_spec_time      | Specific customer revenues per time                          | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_chg             | Maximum charging power                                       | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_dis             | Maximum discharging power                                    | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_ext_ac          | Maximum charging power for external AC charging              | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | pwr_ext_dc          | Maximum charging power for external DC charging              | float            | description                                                                                                                                                                                                                                                                            | [0, inf[                                                          |
|                           | factor_pwr_des      | Factor for maximum charging power in DES                     | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | eff_conv            | Converter efficiency                                         | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | eff_roundtrip       | Storage roundtrip efficiency                                 | float            | description                                                                                                                                                                                                                                                                            | [0, 1]                                                            |
|                           | cdc                 | Cost decrease ratio                                          | float            | Cost decrease ratio of the block's nominal price per year to be considered for replacement after its lifespan                                                                                                                                                                          | [0, 1]                                                            |
|                           | sdr                 | Self discharge rate                                          | float            | Self discharge rate of storage components per month (30 days)                                                                                                                                                                                                                          | [0, inf[                                                          |
|

## Settings Input Parameters
The settings file defines all common parameters for the scenarios in a simulation run.
Its structure is much simpler than with the scenario file.
The following table specifies each parameter of a complete settings file, all of which are required for every run.

| Parameter         | Type | Description                                                                                                                                                                                                                                                                                                                                                                                                     | Valid values or format            |
|-------------------|------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
| solver            | str  | Name of the solver to be used by pyomo for linear optimization                                                                                                                                                                                                                                                                                                                                                  | Tested: ['cbc', 'gurobi', 'gplk'] |
| parallel          | bool | Trigger whether to use parallelization through python's multiprocessing library or work through the scenarios sequentially on a single core. If "paralllel" is True with only one scenario, sequential mode is selected automatically and a corresponding warning is logged. The benefit of parallelization of scenarios is naturally greatest in runs with many scenarios defined.                             | ['True', 'False']                 |
| max_process_num   | int  | Maximum number of processes to be used in case "parallel" is True. This should not exceed the number of threads of the processor(s) used to ensure computational efficiency. Especially in the "go" strategy, REVOL-E-TION is RAM heavy, therefore an even lower setting might make sense in runs with many "go" scenarios. Parameter is ignored if "parallel" is False.                                        | [0,inf[                           |
| save_results      | bool | Trigger whether to save the result summary (covering all scenarios) and timeseries (separately for every scenario) into the selected or default result directory.                                                                                                                                                                                                                                               | ['True', 'False']                 |
| save_des_results  | bool | Trigger whether to save the DES results (i.e. the resulting log and process dataframe) as separate csv files per CommoditySystem and scenario into the selected or default result directory for later usage in other simulations.                                                                                                                                                                               | ['True', 'False']                 |
| print_results     | bool | Trigger whether to print core result values of a scenario (e.g. the LCOE) and each block (e.g. the optimum size) to the terminal after the scenario has successfully completed.                                                                                                                                                                                                                                 | ['True', 'False']                 |
| save_plots        | bool | Trigger whether to save the dispatch plot of each scenario (containing roughly the same information as the timeseries results in visual form) as a separate html file into the selected or default result directory. Since the resulting files are easily in the megabyte range, setting this option to True results in considerable storage requirements. This option is independent of the show_plots option. | ['True', 'False']                 |
| show_plots        | bool | Trigger whether to open each shenario's dispatch plot immediately upon generation using the default web browser. This option is independent of the save_plots option.                                                                                                                                                                                                                                           | ['True', 'False']                 |
| save_system_graph | bool | Trigger whether to save a separate pdf file of a graph representation of every scenario's energy system in the selected or default result directory. Mainly useful for debugging purposes of block definitions.                                                                                                                                                                                                 | ['True', 'False']                 |
| dump_model        | bool | Trigger whether to save a .lp file containing the mathematical optimization model for later solving through pyomo.                                                                                                                                                                                                                                                                                              | ['True', 'False']                 |
| debugmode         | bool | Trigger whether to log and print solver progress information during the solving process. This is resource intensive and should therefore be avoided unless explicitly necessary.                                                                                                                                                                                                                                | ['True', 'False']                 |

## EV-Specific submodules
Since REVOL-E-TION's main purpose is optimum EV integration, this is where focus lies in modelling detail, resulting in the DES and a priori power scheduling submodules.
The following sections give more detail on these submodules:

###  Discrete Event Simulation (DES)
The DES takes stochastically defined mobility or energy demand in multiple use cases and timeframes, samples an actual demand and assigns it to a CommoditySystem (more specifically to the individual MobileCommodities within it) in a first-come-first-serve approach.
This enables to model the mobility/energy demand independently from the commodity fleet size.
However, the DES is run a priori to the dispatch/sizing optimization, so no consideration of whether the resulting commodity dispatch is beneficial to the energy system is taken and limitations through battery aging and/or other limitations have to be covered by safety margins in dispatch to achieve a feasible energy system.
Through the sampling, the DES also makes REVOL-E-TION outputs non-deterministic once it is activated even though the actual core optimization is deterministic.
The DES is run separately for every scenario in a simulation run, but only once per scenario, as some CommoditySystems might be linked and can therefore not be simulated independently.
It is built on the [simpy](https://simpy.readthedocs.io/en/latest/) library and is implemented in the ```commodity_des.py``` file.
A modification is made to simpy in order to enable processes to require multiple resources at once, which is necessary for battery commodity use cases requiring high energy.

The core element of the DES is a so called environment which is populated with processes that each represent one rental of a commodity from a store holding those commodities.
The request time for each rental is sampled from a dual normal distribution over time of day defined for each timeframe and use case in the use case definition csv file.
An example usecase file is distributed with REVOL-E-TION for both VehicleCommoditySystems and BatteryCommoditySystems (explanation see chapter "Classes of Blocks") in the respective input directories.
Inside the code for the DES, RentalSystem instances are created for each CommoditySystem in the scenario as well as a RentalProcess instance for each process.

Each process not only covers the actual rental time (which itself is made up of an active part and idle time, both of which are sampled stochastically), but also a block time to give the energy system enough time to recharge before renting the commodity out again to a new request.
For VehicleCommoditySystems, this block time is placed before each rental, while for BatteryCommoditySystems it is placed after.
<mark>explanation of block time placement not clear</mark>.

Since VehicleCommoditySystems can be linked to BatteryCommoditySystems through the scenario parameter "rex_cs" for range extension, VehicleRentalSystems can also populate BatteryRentalSystems with additional processes representing range extension as a use case.
Such a process then has a primary and secondary commodity, both of which need to be available for the process to be successful.
For each RentalSystem, the primary commodity is the one from that RentalSystem, while the secondary is from the linked one.
This results in range extension batteries being treated as primary in the BatteryRentalSystem and as secondary in the VehicleRentalSystem.

Once all stores have been populated with commodities and all processes have been created, the environment is run and determines which processes are successful (i.e. get their required commodities) and which ones fail.
The successful processes are then converted to a time based log format for the core energy system optimization to use as input.
This contains columns of availability in the energy system(called "<commodity_name>_atbase"), energy consumption while not at base, availability of external AC and DC charging and the Delta SOC ("<commodity_name>_dsoc") of a rental for every commodity and timestep.
For VehicleCommoditySystems, this is expanded by a column with the trip distance, as even with a constant consumption this is no more traceable from the energy consumption due to the possibility of range extension.
Only if the dispatch of the commodities is left to the optimizer (as opposed to the a priori power scheduling) myopically (i.e. in the "rh" strategy"), the dsoc column is actually transferred to a hard minimum SOC constraint for the optimizer, as all other cases handle this intrinsically.

### A Priori Power Scheduling
<mark>Brian</mark>

### A Posteriori Aging Model (also available for StationaryEnergyStorage)
Simple semi-empirical aging models are implemented for the BatteryCommoditySystem and StationaryEnergyStorage classes.
More specifically, these are the Naumann model ([publication 1](https://doi.org/10.1016/j.est.2018.01.019) and [publication 2](https://doi.org/10.1016/j.jpowsour.2019.227666)) for LFP batteries and the [Schmalstieg model](https://doi.org/10.1016/j.jpowsour.2014.02.012) for NMC batteries.
They are both contained within the ```battery.py``` file and work on superposing calendric and cycle aging.
The latter is based on cycling parameters (e.g. depths of discharge) determined using a rainflow algorithm for each horizon.

Results of the aging model (if activated through the scenario file parameter "aging") are evaluated and the capacity degradation applied as a restricted usable SOC window after every horizon.
This results in a dependency of the aging model output on the horizon resolution (i.e. length) with the extreme case of the "go" strategy, where only the State of Health at the end of the simulation timeframe is evaluated.
Please note that the lifetime used for economic extrapolation of simulation results is not connected to the aging model and sizing the battery block on its results is infeasible due to it being run a posteriori and nonlinearly.
Therefore, the aging model's output does not have any influence on the economic results of the simulation, but is only of an informative character.

## Model output
REVOL-E-TION creates a uniquely named (containing the runtimestamp and the scenario file name) result directory for every run.
There, the following files are saved (some of them optionally):
- The log file of the run named ```<runtimestamp>_<scenario_file_name>_log.csv```. This contains all terminal log messages of the run, including errors and warnings.
- (Optional) A single result summary file named ```<runtimestamp>_<scenario_file_name>_summary.csv``` if the setting "save_results" is True in the settings file. This contains all noncomplex (int, float, bool or string) attributes of the SimulationRun, Scenario, and all blocks in the scenario for quick overview of results.
- (Optional) One result timeseries file named ```<runtimestamp>_<scenario_file_name>_<scenario_name>_results.csv``` for every scenario in the run if the setting "save_results" is True in the settings file. This contains all timeseries results of the energy system for every timestep, facilitating easy plotting.
- (Optional) One DES processes and one log file named ```<runtimestamp>_<scenario_file_name>_<scenario_name>_<commodity_system_name>_processes.csv``` and ```<runtimestamp>_<scenario_name>_<commodity_system_name>_log.csv``` for every CommoditySystem of every scenario if the DES is executed for it and the setting "save_des_results" is True in the settings file. This facilitates debugging and reuse as an input for another scenario that is then deterministically run on that behavior.
- (Optional) One dispatch plot file named ```<runtimestamp>_<scenario_file_name>_<scenario_name>.html``` for every scenario if the setting "save_plots" is True in the settings file. This file contains an interactive line plot of the dispatch and state variables (i.e. SOCs and SOHs) of every block in the scenario.
- (Optional) One system graph file named ```<runtimestamp>_<scenario_file_name>_<scenario_name>_system_graph.pdf``` for every scenario if the setting "save_system_graph" is True in the settings file. This file contains a graph representation of the energy system, showing the connections between blocks and the energy flow.




